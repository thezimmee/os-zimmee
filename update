#!/usr/bin/env bash

# load config
init () {
	if [ -z $OSZ_PATH ]; then
		read -e -p "[??] Where is OS Zimmee installed? " -i "~/Projects/os-zimmee" OSZ_PATH
	fi

	# Update homebrew.
	echo "Would you like to update homebrew and all its packages? (y/n) "
	read -r response
	if [[ $response =~ ^(yes|y)$ ]]; then
		bash "${OSZ_PATH}/homebrew/update"
	fi

	# Update homebrew.
	echo "Would you like to run \`brew prune\`? (y/n) "
	read -r response
	if [[ $response =~ ^(yes|y)$ ]]; then
		brew prune
	fi

	# Update npm packages.
	echo "Would you like to update npm global packages? (y/n) "
	read -r response
	if [[ $response =~ ^(yes|y)$ ]]; then
		bash "${OSZ_PATH}/node/update"
	fi

	# Update macOS software.
	echo "Would you like to update macOS Apps? (y/n) "
	read -r response
	if [[ $response =~ ^(yes|y)$ ]]; then
		sudo softwareupdate --install --all
	fi

	# Update prezto / zsh.
	echo "Would you like to update prezto (zsh)? (y/n) "
	read -r response
	if [[ $response =~ ^(yes|y)$ ]]; then
		zprezto-update
	fi
}

init
