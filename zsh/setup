#!/usr/bin/env bash
# set up ZSH
#
# . zsh/setup

# load config
if [[ -z $CONFIG__loaded ]]; then
	CURRENT=${PWD} && cd -P "$( dirname "$0" )" && cd .. && . ./config && cd $CURRENT
fi

# change zsh to default shell
echo "Changing default shell to ZSH..."
chsh -s /bin/zsh

# set up ZSH dotfiles
echo "Setting up ZSH dotfiles..."
for dotfile in $(find ${OSZ_ROOT}/zsh -name '*.link'); do
	dest="$HOME/.$(basename "${dotfile%.*}")"
	if [[ $(readlink "$dest") != "$dotfile" ]]; then
		ln -sf "$dotfile" "$dest"
		echo "Symlinked $dotfile to $dest."
	else
		echo "Skipped $dotfile."
	fi
done
